# GitHub Copilot Instructions ‚Äî LoveTravel Child Theme Workspace

**Last Updated**: October 25, 2025  
**Theme Version**: 2.2.0 (Production Ready)  
**Project**: TribeTravel.eu WordPress Child Theme  
**Repository**: [wp-lovetravel-child](https://github.com/richardevcom/wp-lovetravel-child)  
**Parent Repository**: [wp-tribetravel](https://github.com/richardevcom/wp-tribetravel)

---

## üéØ WORKSPACE CONTEXT

This **VS Code Workspace** includes the child theme and all related plugins/themes for comprehensive development:

### Folders in This Workspace
- üé® **Child Theme** (main) ‚Äî `/lovetravel-child/`
- üé® **Parent Theme** ‚Äî `/lovetravel/` (read-only reference)
- üîå **Elementor Pro** ‚Äî `/plugins/elementor-pro/` (read-only reference)
- üîå **ND Travel** ‚Äî `/plugins/nd-travel/` (read-only reference)
- üîå **ND Elements** ‚Äî `/plugins/nd-elements/` (read-only reference)
- üîå **ND Shortcodes** ‚Äî `/plugins/nd-shortcodes/` (read-only reference)
- üîå **Contact Form 7** ‚Äî `/plugins/contact-form-7/` (read-only reference)
- üîå **Mailchimp for WP** ‚Äî `/plugins/mailchimp-for-wp/` (read-only reference)

### Docker Integration
- **Development Environment**: Docker containers expose WordPress files
- **Site Access**: http://localhost:8080
- **Database**: MariaDB with persistent volumes
- **Debug**: `/wp-content/debug.log` for WordPress errors

---

## PRIMARY OBJECTIVES

1. Learn and audit child theme codebase plus parent/plugin references
2. Produce safe, maintainable changes ONLY inside child theme
3. Update this file and README.md (never create separate report files)
4. Propose small, tested, incremental improvements after user confirmation

---

## HARD RULES (never break)

1. **Never edit anything outside `lovetravel-child`** except this file or README.md
2. **Never invent** WordPress functions, hooks, plugin internals, or credentials ‚Äî use `#vscode-websearchforcopilot_webSearch` and cite sources
3. **Do not create report files** ‚Äî update `copilot-instructions.md` or `README.md` only
4. **Keep chat output minimal** ‚Äî return only what explicitly requested (code diffs, short summaries, questions)
5. **Always ask clarifying questions** before design/feature decisions you cannot verify

---

## ANTI-HALLUCINATION RULE (mandatory)

**ALWAYS use `#vscode-websearchforcopilot_webSearch`** for:
- Any WordPress function, hook, or API behavior
- Plugin internals or compatibility with WP 6.8.3
- When uncertain about implementation approach

**Research hierarchy**:
1. Search codebase first
2. Use `#vscode-websearchforcopilot_webSearch` on developer.wordpress.org or official plugin docs
3. Community sources (cite URL and date)

**Citation format**: Include source URL in plan before implementing.

---

## SCOPE & EDITING RESTRICTIONS

**ONLY edit files in**: `/home/richardevcom/dev/tribetravel.eu/wp-content/themes/lovetravel-child`

**Never edit**:
- Parent theme files
- Plugin files (nd-travel, nd-elements, nd-shortcodes, elementor-pro, etc.)
- WordPress core files
- Files outside child theme (except this instructions file and README.md)

**When you must override parent template**:
- Copy minimal file to child theme
- Add file header comment explaining reason and date

---

## CODE STYLE & STANDARDS

**WordPress Coding Standards (WPCS)**:
- Tabs for indentation (not spaces)
- Snake_case for functions, PascalCase for classes
- Use `load_child_theme_textdomain('lovetravel-child')` for i18n
- Enqueue parent assets first, child assets after with proper dependencies
- Use `add_action`/`add_filter` instead of editing parent/plugin files

**Brand Color Palette (mandatory)**:
- `#ffffff` - Background (primary white)
- `#000000` - Text, primary foreground
- `#EA5B10` - Accent color (orange - buttons, links, icons, highlights)
- `#363635` - Borders, secondary text, subtle elements

**PHPDoc blocks**:
```php
/**
 * Short one-line description.
 *
 * @param type $var Description.
 * @return type Description.
 */
```

**Avoid commenting self-explanatory code** ‚Äî add comments only where necessary, keep short and clean.

**JavaScript (ES6 Modules - MANDATORY)**:
- **NO jQuery** - Use vanilla JavaScript with modern ES6+ features
- **Module System**: WordPress 6.5+ Script Modules API (`wp_enqueue_script_module`)
- **Import/Export**: Use ES6 import/export syntax exclusively
- **Classes**: Use ES6 classes for components, utilities as functions/objects
- **Async/Await**: Use modern async patterns, avoid callbacks
- **DOM Manipulation**: Custom DOMCollection class (jQuery replacement)
- **AJAX**: Modern fetch API with WordPress integration
- **Structure**: Modular organization in `assets/js/modules/`
  ```
  modules/
  ‚îú‚îÄ‚îÄ core/           # Core utilities (dom-utils, ajax-utils, wp-utils)
  ‚îú‚îÄ‚îÄ components/     # Reusable UI components (classes)
  ‚îî‚îÄ‚îÄ main.js         # Theme orchestrator/entry point
  ```
- **WordPress Integration**: Use `wp.hooks`, `wp.element`, localized data
- **Performance**: Event delegation, lazy loading, minimal DOM queries
- **Accessibility**: ARIA labels, keyboard support, screen reader text
- **Error Handling**: Try/catch blocks, graceful degradation

---

## SECURITY CHECKLIST (enforce always)

- Nonces + capability checks for state changes
- `wp_verify_nonce()` / `check_ajax_referer()` for AJAX
- `current_user_can()` checks
- `sanitize_*()` on all inputs
- `esc_*()` on all outputs
- `wpdb->prepare()` for raw SQL

---

## WORDPRESS ADMIN UI/UX STANDARDS (mandatory)

**Always use WordPress native admin UI patterns** ‚Äî never invent custom admin interfaces.

### Core Principles

1. **Use ONLY WordPress default styles, layout, and components**
2. **Reference local WordPress core** at `/home/richardevcom/dev/wordpress` for markup/CSS examples
3. **If component doesn't exist** ‚Äî use `#vscode-websearchforcopilot_webSearch` to find solutions, then adapt to WordPress styling

### Required Admin UI Elements

**Page wrapper structure**:
```php
<div class="wrap">
    <h1 class="wp-heading-inline">Page Title</h1>
    <?php settings_errors(); ?>
    <!-- Content here -->
</div>
```

**Essential CSS classes**:
- `.wrap` ‚Äî Main admin page wrapper
- `.button`, `.button-primary`, `.button-secondary` ‚Äî Standard buttons
- `.notice`, `.notice-success`, `.notice-error`, `.notice-warning`, `.notice-info` ‚Äî Admin notices
- `.form-table` ‚Äî Settings form tables
- `.wp-list-table`, `.widefat` ‚Äî Data tables
- `.postbox`, `.hndle`, `.inside` ‚Äî Meta boxes

**Typography & Forms**:
- Use semantic headings: `<h1>` for page title, `<h2>` for sections, `<h3>` for meta boxes
- Form inputs: `.regular-text`, `.small-text`, `.widefat`
- Always use `<label for="id">` with form elements
- Helper text: `<p class="description">`

**Dashicons for icons**:
```php
<span class="dashicons dashicons-admin-generic"></span>
```

### Research Workflow for Admin UI

When building admin interfaces:

1. **Check WordPress core reference** at `/home/richardevcom/dev/wordpress/wp-admin/` for examples
2. **Search codebase** for similar existing admin pages
3. **If no local example** ‚Äî use `#vscode-websearchforcopilot_webSearch` for:
   - WordPress Developer Handbook
   - WordPress Codex admin UI patterns
   - Popular plugins (WooCommerce, Elementor) for complex UI patterns
4. **Adapt found solutions** to match WordPress default styling (colors, spacing, components)

### Forbidden Practices

- ‚ùå Custom CSS frameworks (Bootstrap, Tailwind, etc.) in admin
- ‚ùå Non-standard UI components or interaction models
- ‚ùå Inline styles (use WordPress admin CSS classes)
- ‚ùå Custom JavaScript UI libraries (use WordPress native or jQuery UI)

### Verification

For each admin interface, confirm:
- [ ] Uses `.wrap` container
- [ ] Uses WordPress core button/notice/form classes
- [ ] Follows Settings API for option pages
- [ ] Matches WordPress admin color scheme
- [ ] Works with all WordPress admin color schemes (Default, Light, Blue, etc.)
- [ ] Responsive (uses WordPress breakpoints)
- [ ] Accessible (ARIA labels, keyboard navigation, screen reader text)

---

## SECURITY CHECKLIST (enforce always)

**For each change**:
1. Test in Docker environment
2. Check admin pages involved
3. Review `debug.log` for PHP errors
4. Check browser console for JS errors

**Provide verification checklist** (3‚Äì6 steps) with each deliverable.

**WP-CLI examples**:
```bash
docker compose exec wordpress wp cache flush
docker compose exec wordpress wp theme list
```

**Do not run DB-destructive commands** without explicit approval.

---

## COMMUNICATION RULES

**Ask specific questions only** ‚Äî no broad/open questions.

Example: "Should I remove `test-import-state.php` now, or move it to `lovetravel-child/dev/` for later removal?"

**When research needed**: "I will run `#vscode-websearchforcopilot_webSearch` on [query]. Proceed?" ‚Äî then execute after confirmation.

---

## DELIVERABLES FORMAT

**For each task provide**:
1. Short plan (2‚Äì4 bullets)
2. Minimal code diff or single-file edits (no full-file dumps unless requested)
3. Short verification checklist (3‚Äì6 steps)
4. If refactor: list impacted areas and migration notes

---

## COMMIT MESSAGE FORMAT

```
type(scope): short summary ‚Äî emoji

Examples:
fix(import): handle null index when parsing API response üêõ
chore(theme): tidy imports and add sanitization helper ‚ú®
feat(wizard): add progress indicator for media imports ‚ö°
```

---

## FILE ORGANIZATION (WordPress standards)

**APPROVED STRUCTURE** (do not refactor without approval):

```
lovetravel-child/
‚îú‚îÄ‚îÄ functions.php                           # Bootstrap only (instantiate main class)
‚îú‚îÄ‚îÄ style.css                               # Theme header + CSS variables
‚îú‚îÄ‚îÄ screenshot.jpg
‚îú‚îÄ‚îÄ README.md
‚îú‚îÄ‚îÄ CHANGELOG.md
‚îú‚îÄ‚îÄ TODO.md
‚îÇ
‚îú‚îÄ‚îÄ assets/                                 # SHARED assets (used by both admin & public)
‚îÇ   ‚îú‚îÄ‚îÄ css/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ variables.css                  # CSS custom properties
‚îÇ   ‚îú‚îÄ‚îÄ js/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ common.js                      # Shared utilities
‚îÇ   ‚îú‚îÄ‚îÄ images/
‚îÇ   ‚îî‚îÄ‚îÄ fonts/
‚îÇ
‚îú‚îÄ‚îÄ admin/                                  # ADMIN-ONLY functionality
‚îÇ   ‚îú‚îÄ‚îÄ class-lovetravel-child-admin.php   # Admin hooks, enqueue, pages
‚îÇ   ‚îú‚îÄ‚îÄ assets/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ css/
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ admin.css                  # Admin-specific styles
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ js/
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ admin.js                   # Admin-specific scripts
‚îÇ   ‚îî‚îÄ‚îÄ partials/                          # Admin view templates
‚îÇ       ‚îî‚îÄ‚îÄ settings-page.php              # Settings page HTML
‚îÇ
‚îú‚îÄ‚îÄ public/                                 # PUBLIC-ONLY functionality
‚îÇ   ‚îú‚îÄ‚îÄ class-lovetravel-child-public.php  # Frontend hooks, enqueue
‚îÇ   ‚îú‚îÄ‚îÄ assets/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ css/
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ public.css                 # Frontend-specific styles
‚îÇ   ‚îî‚îÄ‚îÄ partials/                          # Frontend view templates
‚îÇ
‚îú‚îÄ‚îÄ includes/                               # SHARED utilities & core (NOT Elementor-specific)
‚îÇ   ‚îú‚îÄ‚îÄ class-lovetravel-child.php         # Main theme class (core orchestrator)
‚îÇ   ‚îú‚îÄ‚îÄ class-lovetravel-child-loader.php  # Hook loader with priority control
‚îÇ   ‚îú‚îÄ‚îÄ class-lovetravel-child-i18n.php    # Internationalization
‚îÇ   ‚îú‚îÄ‚îÄ class-lovetravel-child-taxonomy-manager.php  # Taxonomy registration & management
‚îÇ   ‚îú‚îÄ‚îÄ class-lovetravel-child-favicon.php # Favicon output manager
‚îÇ   ‚îú‚îÄ‚îÄ helpers.php                        # Helper/utility functions
‚îÇ   ‚îî‚îÄ‚îÄ favicon-helpers.php                # Favicon standalone functions
‚îÇ
‚îú‚îÄ‚îÄ elementor/                              # ALL Elementor-related code (MANDATORY)
‚îÇ   ‚îú‚îÄ‚îÄ class-lovetravel-child-elementor-manager.php  # Elementor main loader/orchestrator
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ widgets/                           # Custom Elementor widgets
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ class-typology-card-widget.php
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ class-typology-cards-widget.php
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ class-packages-widget.php      # Standalone (replaces hook-based extension)
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ class-search-widget.php        # Standalone (replaces hook-based extension)
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ dynamic-tags/                      # Elementor Dynamic Tags for WordPress ‚Üî Elementor sync
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ class-dynamic-tags-manager.php
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ class-text-dynamic-tag.php
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ class-image-dynamic-tag.php
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ class-color-dynamic-tag.php
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ class-url-dynamic-tag.php
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ post-meta/                         # Post meta registration (for Dynamic Tags)
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ class-post-meta-manager.php
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ metaboxes/                         # WordPress metaboxes (admin UI for post data)
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ class-typology-card-metabox.php
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ templates/                         # Widget layout PHP templates
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ packages/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ layout-1.php
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ layout-2.php
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ search/
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ layout-1.php
‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ library/                           # Imported JSON templates (auto-import on activation)
‚îÇ       ‚îú‚îÄ‚îÄ sections/
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ 01-hero-slider.json
‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ 02-search-form.json
‚îÇ       ‚îî‚îÄ‚îÄ pages/
‚îÇ           ‚îî‚îÄ‚îÄ 01-homepage.json
‚îÇ
‚îú‚îÄ‚îÄ languages/
‚îÇ   ‚îî‚îÄ‚îÄ lovetravel-child.pot
‚îÇ
‚îî‚îÄ‚îÄ .github/
    ‚îî‚îÄ‚îÄ copilot-instructions.md            # This file
```

---

## FOLDER STRUCTURE RULES (MANDATORY ‚Äî never violate)

### **Core Principles**

**Based on**:
- WordPress Plugin Boilerplate (OOP architecture)
- WordPress Theme Developer Handbook (developer.wordpress.org)
- Elementor addon development best practices (developers.elementor.com)

**Sources**:
- Plugin Boilerplate: `/home/richardevcom/dev/tribetravel.eu/wp-content/plugins/plugin-boilerplate`
- Web research: Codeable.io, WP White Label, Elementor Developers Documentation (2025)

### **Strict Placement Rules**

#### ‚ùå **FORBIDDEN: Never place these in `includes/`**
- Elementor widgets
- Elementor Dynamic Tags
- Elementor-specific managers
- Post meta managers (if for Elementor sync)
- WordPress metaboxes that integrate with Elementor

**Reason**: `includes/` is for GLOBAL, non-Elementor utilities only (follows plugin boilerplate pattern)

#### ‚úÖ **REQUIRED: All Elementor code goes in `elementor/`**

**Mandatory subdirectories**:

1. **`elementor/widgets/`** - Custom widget classes
   - Each widget = separate file
   - Class naming: `class-widget-name-widget.php`
   - Example: `class-typology-card-widget.php`

2. **`elementor/dynamic-tags/`** - Dynamic Tag classes for WordPress ‚Üî Elementor sync
   - Manager class + individual tag types
   - Example: `class-text-dynamic-tag.php`

3. **`elementor/post-meta/`** - Post meta registration
   - Registers meta with REST API (`show_in_rest: true`)
   - Used by Dynamic Tags for syncing

4. **`elementor/metaboxes/`** - WordPress admin metaboxes
   - Admin UI for post data that syncs to Elementor
   - Example: `class-typology-card-metabox.php`

5. **`elementor/templates/`** - Widget layout PHP files
   - Sub-folders per widget (e.g., `packages/`, `search/`)
   - Used by `render()` methods

6. **`elementor/library/`** - JSON template files
   - Auto-imported on theme activation
   - Organized: `sections/`, `pages/`

#### ‚úÖ **ALLOWED: What goes in `includes/`**

ONLY global utilities NOT specific to Elementor:
- Main theme class (`class-lovetravel-child.php`)
- Loader class (`class-lovetravel-child-loader.php`)
- i18n class (`class-lovetravel-child-i18n.php`)
- Taxonomy manager (global taxonomies)
- Favicon manager (Customizer integration)
- Helper functions (global utilities)

#### ‚úÖ **REQUIRED: Admin/Public separation maintained**

- `admin/` - Admin-only hooks, assets, partials
- `public/` - Frontend-only hooks, assets, partials
- `assets/` - Shared assets (both admin + public)

### **File Naming Conventions**

**Classes**:
- Format: `class-name-with-hyphens.php`
- Examples:
  - `class-lovetravel-child-elementor-manager.php`
  - `class-typology-card-widget.php`
  - `class-dynamic-tags-manager.php`

**Class Names (inside files)**:
- Format: `LoveTravelChild_Name_With_Underscores`
- Examples:
  - `LoveTravelChild_Elementor_Manager`
  - `LoveTravelChild_Typology_Card_Widget`

**Functions**:
- Format: `lovetravelChild_name_with_underscores()`
- Example: `lovetravelChild_enqueue_elementor_assets()`

**Hooks**:
- Format: `lovetravel_child/hook_name`
- Example: `lovetravel_child/elementor/widgets_registered`

**Text Domain**: `lovetravel-child` (kebab-case)

### **Architecture Pattern**

**Inspired by WordPress Plugin Boilerplate**:

1. **Bootstrap file** (`functions.php`):
   - Load main class
   - Instantiate and run: `$theme = new LoveTravelChild(); $theme->run();`

2. **Main orchestrator** (`includes/class-lovetravel-child.php`):
   - `load_dependencies()` - Require all classes
   - `set_locale()` - i18n setup
   - `define_admin_hooks()` - Admin functionality
   - `define_public_hooks()` - Frontend functionality
   - `define_elementor_hooks()` - Elementor functionality
   - `run()` - Execute loader

3. **Loader class** (`includes/class-lovetravel-child-loader.php`):
   - `add_action($hook, $component, $callback, $priority, $accepted_args)`
   - `add_filter($hook, $component, $callback, $priority, $accepted_args)`
   - `run()` - Register all hooks with WordPress

4. **Specialized managers**:
   - Admin class (`admin/class-lovetravel-child-admin.php`)
   - Public class (`public/class-lovetravel-child-public.php`)
   - Elementor manager (`elementor/class-lovetravel-child-elementor-manager.php`)

5. **Hook registration via Loader**:
   ```php
   // In main class:
   $elementor_manager = new LoveTravelChild_Elementor_Manager();
   $this->loader->add_action('elementor/widgets/register', $elementor_manager, 'register_widgets');
   ```

### **Asset Loading Priorities**

**Critical for child theme override**:
- Parent theme (lovetravel): priority `10` (default)
- Core plugins (nd-travel, nd-elements, nd-shortcodes): priority `10-15`
- **Child theme: priority `20`** (ensures our styles/scripts always override)

**Enqueue pattern**:
```php
// In Admin/Public/Elementor classes:
public function enqueue_styles() {
	wp_enqueue_style(
		$this->plugin_name . '-admin',
		plugin_dir_url(__FILE__) . 'assets/css/admin.css',
		array(), // Dependencies
		$this->version,
		'all'
	);
}
```

### **Migration from Old Structure**

**OLD (deprecated)**:
```
includes/
‚îú‚îÄ‚îÄ class-lovetravel-child-elementor-widgets-manager.php  ‚ùå
‚îú‚îÄ‚îÄ class-lovetravel-child-elementor-search-widget-extension.php  ‚ùå
‚îî‚îÄ‚îÄ elementor-widgets/  ‚ùå
    ‚îú‚îÄ‚îÄ class-lovetravel-child-typology-card-widget.php  ‚ùå
    ‚îî‚îÄ‚îÄ packages/
        ‚îî‚îÄ‚îÄ layouts/
            ‚îî‚îÄ‚îÄ layout-1.php  ‚ùå
```

**NEW (required)**:
```
elementor/
‚îú‚îÄ‚îÄ class-lovetravel-child-elementor-manager.php  ‚úÖ
‚îú‚îÄ‚îÄ widgets/
‚îÇ   ‚îú‚îÄ‚îÄ class-typology-card-widget.php  ‚úÖ
‚îÇ   ‚îî‚îÄ‚îÄ class-search-widget.php  ‚úÖ (standalone, not hook-based extension)
‚îî‚îÄ‚îÄ templates/
    ‚îî‚îÄ‚îÄ packages/
        ‚îî‚îÄ‚îÄ layout-1.php  ‚úÖ
```

**Backup rule**:
- Before migration: Move old files to `./backup/deprecated-[date]/`
- Never delete without user approval
- Document what was moved in backup folder's README.md

---

## NAMING CONVENTIONS (consolidated)

**Classes**:
- File: `class-name-with-hyphens.php`
- Class: `LoveTravelChild_Name_With_Underscores`
- Example: `class-elementor-manager.php` ‚Üí `LoveTravelChild_Elementor_Manager`

**Functions**:
- Format: `lovetravelChild_function_name()`
- Example: `lovetravelChild_register_dynamic_tags()`

**Hooks**:
- Format: `lovetravel_child/context/action`
- Example: `lovetravel_child/elementor/widgets_loaded`

**Text Domain**: `lovetravel-child` (all i18n functions)

**Constants**:
- Format: `LOVETRAVEL_CHILD_CONSTANT_NAME`
- Example: `LOVETRAVEL_CHILD_VERSION`

---

## CURRENT PROJECT STATE

WordPress child theme extending LoveTravel parent theme with:
- **Version**: 2.6.1 (PRODUCTION READY - January 28, 2025)
- **Base Architecture**: OOP structure (plugin-boilerplate pattern)
- **Folder Structure**: NEW - All Elementor code in dedicated `elementor/` folder
- **Admin Settings**: Settings page under Appearance menu with template management
- **i18n Ready**: Full translation support

**Development Status - ALL PHASES COMPLETE**:
- ‚úÖ Core OOP structure established (v2.0.0 clean rebuild)
- ‚úÖ Asset loading with correct priorities
- ‚úÖ Admin/Public separation
- ‚úÖ Favicon system with Customizer integration
- ‚úÖ Taxonomy Manager class (modular, reusable)
- ‚úÖ **MONTHS TAXONOMY COMPLETELY ELIMINATED** ‚úÖ
  - ‚úÖ Months taxonomy (nd_travel_cpt_1_tax_4) removed from system
  - ‚úÖ Replaced with HTML5 date range inputs (dd.mm.yyyy format)
  - ‚úÖ All Elementor editor controls cleaned up
- ‚úÖ **PHASE 1 COMPLETE: Folder structure migration** ‚úÖ
  - ‚úÖ New `elementor/` folder with 6 subdirectories
  - ‚úÖ Elementor Manager class (centralized orchestrator)
  - ‚úÖ Widgets moved to `elementor/widgets/`
  - ‚úÖ Metaboxes moved to `elementor/metaboxes/`
  - ‚úÖ Templates moved to `elementor/templates/`
  - ‚úÖ JSON library moved to `elementor/library/`
  - ‚úÖ Legacy code cleaned up (October 25, 2025)
- ‚úÖ Admin Notices framework (OOP, reusable)
- ‚úÖ Elementor Template Importer (auto-import, dependency validation)
- ‚úÖ **PHASE 2 COMPLETE: Widget migration** ‚úÖ
  - ‚úÖ Search extension ‚Üí standalone widget (class-search-widget.php)
  - ‚úÖ Packages extension ‚Üí standalone widget (class-packages-widget.php)
  - ‚úÖ Dynamic Tags system implemented
  - ‚úÖ Post Meta Manager implemented
- ‚úÖ **PHASE 3 COMPLETE: Legacy cleanup** ‚úÖ
  - ‚úÖ All hook-based extensions removed
  - ‚úÖ Backup files deleted
  - ‚úÖ Version bumped to 2.2.0
- ‚úÖ **BONUS: Load More feature** ‚úÖ
  - ‚úÖ AJAX pagination for Packages widget
  - ‚úÖ Masonry re-initialization
  - ‚úÖ Editor context detection
- ‚úÖ **JAVASCRIPT MODERNIZATION COMPLETE** ‚úÖ
  - ‚úÖ jQuery elimination - 100% vanilla JavaScript
  - ‚úÖ ES6 module architecture with WordPress 6.5+ Script Modules API
  - ‚úÖ Core utilities: DOMCollection (jQuery replacement), AJAX (fetch-based), WordPress integration
  - ‚úÖ Component classes: TeamMemberCard, PackagesLoadMore, AdminNotices
  - ‚úÖ Main orchestrator with global event handling and component management
  - ‚úÖ Modern patterns: async/await, event delegation, accessibility, error handling
- ‚úÖ **DOCUMENTATION RESTRUCTURE** ‚úÖ
  - ‚úÖ README.md updated to reflect v2.2.0 state
  - ‚úÖ TODO.md restructured for future development
  - ‚úÖ All legacy references removed

**READY FOR PRODUCTION**: All technical development phases complete

**Known nd-travel Plugin Taxonomies**:
- `nd_travel_cpt_1` - Main CPT (labeled "Packages" in plugin, should be "Adventures")
- `nd_travel_cpt_1_tax_1` - Durations taxonomy (child theme overrides labels)
- `nd_travel_cpt_1_tax_2` - Difficulty taxonomy (child theme overrides labels)
- `nd_travel_cpt_1_tax_3` - Min Age taxonomy (child theme overrides labels)
- **Date Search**: HTML5 date range inputs using nd_travel_meta_box_availability_from/to fields ‚úÖ
- `nd_travel_cpt_2` - Typologies CPT (has custom Card Settings metabox)

**Elementor Integration**:

**CURRENT STRUCTURE (v2.2.0 - PRODUCTION READY - October 25, 2025)**:
- Centralized Elementor Manager (`elementor/class-lovetravel-child-elementor-manager.php`)
- Custom widgets: Search, Packages, Typology Card, Typology Cards (grid)
- Dynamic Tags system for WordPress ‚Üî Elementor sync
- Post Meta Manager with REST API integration
- Metaboxes: Typology Card Settings (injected tab)
- Template system: Auto-import JSON templates from `elementor/library/`
- Admin UI: Import status table under Appearance ‚Üí Child Theme
- Load More feature: AJAX pagination with masonry support

**FEATURES**:
- Search Widget: 8 Content sections, 6 Style sections, Month taxonomy integration
- Packages Widget: nd-travel 1:1 controls, Load More pagination, editor CSS fixes
- Dynamic Tags: Text, Image, Color, URL tags for post meta sync
- Editor Support: Masonry grid fix, modal suppression, gray background removal

**ALL DEVELOPMENT COMPLETE**: Theme ready for production use with full Elementor integration

---

## ELEMENTOR TEMPLATE MANAGEMENT (mandatory workflow)

**Directory Structure** (NEW - Phase 1):
```
elementor/library/
‚îú‚îÄ‚îÄ sections/          # Reusable sections (hero sliders, search forms, CTAs)
‚îÇ   ‚îú‚îÄ‚îÄ 01-hero-slider.json
‚îÇ   ‚îî‚îÄ‚îÄ 02-search.json
‚îî‚îÄ‚îÄ pages/             # Full page layouts (empty - add as needed)
```

**OLD LOCATION** (deprecated):
- `/elementor-templates/` ‚Üí migrated to `/elementor/library/` (October 25, 2025)

**Adding New Templates**:
1. Export from Elementor UI (Tools ‚Üí Export Template)
2. Rename: `##-descriptive-name.json` (e.g., `01-hero-slider.json`, `02-search-form.json`)
3. Place in correct directory (sections/ or pages/)
4. Commit to Git
5. Auto-imports on theme activation

**Naming Rules**:
- ‚úÖ `01-hero-slider.json` (numeric prefix + hyphens)
- ‚ùå `hero-slider.json` (missing number)
- ‚ùå `1-hero.json` (use two digits: 01, 02)
- ‚ùå `01_hero_slider.json` (use hyphens, not underscores)

**Classes**:
- `LoveTravelChildElementorTemplateImporter` ‚Äî Import logic, dependency checks
- `LoveTravelChildAdminNotices` ‚Äî Reusable notice system (dismissible, conditional)

**Dependency Checks**:
- Parent theme: `wp_get_theme()->parent()->get('TextDomain')` === 'lovetravel'
- Elementor: `did_action('elementor/loaded')`
- Elementor Pro: `function_exists('elementor_pro_load_plugin')`
- ND Travel: `function_exists('nd_travel_scripts')` OR `post_type_exists('nd_travel_cpt_1')`

**Hooks**:
- `after_switch_theme` ‚Äî Auto-import templates
- `admin_notices` ‚Äî Display import status

**Admin UI**:
- Location: **Appearance ‚Üí Child Theme ‚Üí Elementor Templates**
- Shows: Import status table, dependency warnings, Elementor link
- Does NOT allow: Manual re-import (must reactivate theme)

**Documentation**:
- Full workflow: `/elementor-templates/README.md`
- User guide includes: export, naming, commit, verify

## FILE ORGANIZATION (WordPress standards)

## INITIAL AUDIT TASKS

1. **Find temp/test files** in theme root ‚Äî propose move to `dev/` or delete
2. **Identify duplicate logic** ‚Äî propose refactor into reusable functions
3. **Verify i18n** ‚Äî ensure all strings use `lovetravel-child` text domain
4. **Security audit** ‚Äî check for unsanitized inputs, missing nonces
5. **Check debug.log** ‚Äî flag any child theme errors

---

## SUCCESS CRITERIA

- Clean working tree post-commit
- All changes tested in Docker environment
- No PHP/JS errors in logs/console
- WordPress standards compliance
- Minimal chat output (no unnecessary commentary)
- Evidence-based decisions (cite sources when using `#vscode-websearchforcopilot_webSearch`)

---

**END OF INSTRUCTIONS**